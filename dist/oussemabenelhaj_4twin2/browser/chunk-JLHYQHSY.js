import{a as H,c as G,e as N,p as z}from"./chunk-PI5HVCYI.js";import{b as T,e as V,f as F}from"./chunk-E66NZBJX.js";import{$ as P,A as o,F as v,H as m,L as e,M as t,N as p,Q as D,R as f,S as _,T as i,U as h,V as u,X as S,Y as O,Z as y,aa as C,ka as L,l as x,la as E,m as M,na as k,q as b,r as w,s,t as d,ya as I}from"./chunk-B4X4Z6EU.js";import"./chunk-4CLCTAJ7.js";var B=a=>["/departments",a],j=a=>["/departments",a,"edit"];function W(a,r){a&1&&p(0,"app-loading-spinner")}function R(a,r){if(a&1){let n=D();e(0,"tr")(1,"td")(2,"div",19)(3,"div",20),s(),e(4,"svg",21),p(5,"path",22),t()(),d(),e(6,"div")(7,"span",23),i(8),t(),e(9,"span",24),i(10),t()()()(),e(11,"td"),i(12),t(),e(13,"td"),i(14),t(),e(15,"td"),i(16),t(),e(17,"td")(18,"div",25)(19,"a",26),s(),e(20,"svg",3),p(21,"path",27)(22,"circle",28),t()(),d(),e(23,"a",26),s(),e(24,"svg",3),p(25,"path",29)(26,"path",30),t()(),d(),e(27,"button",31),f("click",function(){let c=b(n).$implicit,g=_(2);return w(g.confirmDel(c))}),s(),e(28,"svg",3),p(29,"path",32),t()()()()()}if(a&2){let n=r.$implicit;o(8),h(n.name),o(2),u("#",n.idDepartment,""),o(2),h(n.location),o(2),h(n.phone),o(2),h(n.head),o(3),m("routerLink",C(7,B,n.idDepartment)),o(4),m("routerLink",C(9,j,n.idDepartment))}}function q(a,r){a&1&&(e(0,"tr")(1,"td",33)(2,"div",34),s(),e(3,"svg",35),p(4,"path",22),t(),d(),e(5,"h3"),i(6,"No departments found"),t(),e(7,"p"),i(8,"Add your first department"),t(),e(9,"a",2),i(10,"Add Department"),t()()()())}function J(a,r){if(a&1&&(e(0,"div",16)(1,"table",17)(2,"thead")(3,"tr")(4,"th"),i(5,"Department"),t(),e(6,"th"),i(7,"Location"),t(),e(8,"th"),i(9,"Phone"),t(),e(10,"th"),i(11,"Head"),t(),p(12,"th"),t()(),e(13,"tbody"),v(14,R,30,11,"tr",18)(15,q,11,0,"tr",13),t()()()),a&2){let n=_();o(14),m("ngForOf",n.filtered),o(),m("ngIf",n.filtered.length===0)}}var A=class a{svc=x(T);items=[];filtered=[];loading=!0;showDel=!1;selected=null;search="";ngOnInit(){this.load()}load(){this.svc.getAll().subscribe({next:r=>{this.items=r,this.filtered=r,this.loading=!1},error:()=>this.loading=!1})}filter(){let r=this.search.toLowerCase();this.filtered=this.items.filter(n=>n.name.toLowerCase().includes(r)||n.location.toLowerCase().includes(r))}confirmDel(r){this.selected=r,this.showDel=!0}del(){this.selected?.idDepartment&&this.svc.delete(this.selected.idDepartment).subscribe({next:()=>{this.items=this.items.filter(r=>r.idDepartment!==this.selected?.idDepartment),this.filter(),this.showDel=!1},error:()=>this.showDel=!1})}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=M({type:a,selectors:[["app-department-list"]],standalone:!0,features:[P],decls:23,vars:6,consts:[[1,"page","animate-fade-in"],[1,"page-header"],["routerLink","/departments/new",1,"btn","btn-primary"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","width","18","height","18"],["d","M12 5v14m-7-7h14"],[1,"card"],[1,"toolbar"],[1,"search"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Search departments...",3,"ngModelChange","input","ngModel"],[1,"count"],[4,"ngIf"],["class","table-wrap",4,"ngIf"],["title","Delete Department",3,"confirmed","cancelled","isOpen","message"],[1,"table-wrap"],[1,"table"],[4,"ngFor","ngForOf"],[1,"dept"],[1,"icon"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M3 21h18M5 21V7l7-4 7 4v14"],[1,"name"],[1,"id"],[1,"actions"],[1,"btn","btn-ghost","btn-icon-sm",3,"routerLink"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"btn","btn-ghost","btn-icon-sm",3,"click"],["d","M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],["colspan","5"],[1,"empty"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1"]],template:function(n,l){n&1&&(e(0,"div",0)(1,"header",1)(2,"div")(3,"h1"),i(4,"Departments"),t(),e(5,"p"),i(6,"Manage academic departments"),t()(),e(7,"a",2),s(),e(8,"svg",3),p(9,"path",4),t(),i(10,"Add Department"),t()(),d(),e(11,"div",5)(12,"div",6)(13,"div",7),s(),e(14,"svg",8),p(15,"circle",9)(16,"path",10),t(),d(),e(17,"input",11),y("ngModelChange",function(g){return O(l.search,g)||(l.search=g),g}),f("input",function(){return l.filter()}),t()(),e(18,"span",12),i(19),t()(),v(20,W,1,0,"app-loading-spinner",13)(21,J,16,2,"div",14),t()(),e(22,"app-confirm-dialog",15),f("confirmed",function(){return l.del()})("cancelled",function(){return l.showDel=!1}),t()),n&2&&(o(17),S("ngModel",l.search),o(2),u("",l.filtered.length," departments"),o(),m("ngIf",l.loading),o(),m("ngIf",!l.loading),o(),m("isOpen",l.showDel)("message","Delete "+(l.selected==null?null:l.selected.name)+"?"))},dependencies:[k,L,E,I,z,H,G,N,F,V],styles:[".page[_ngcontent-%COMP%]{padding:var(--space-8);max-width:1440px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--space-6);flex-wrap:wrap;gap:var(--space-4)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--space-1)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}.card[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border-subtle);border-radius:var(--radius-xl);overflow:hidden}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-4) var(--space-6);border-bottom:1px solid var(--border-subtle);flex-wrap:wrap;gap:var(--space-4)}.search[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3);background:var(--bg-base);border:1px solid var(--border-default);border-radius:var(--radius-lg);padding:var(--space-2) var(--space-4);min-width:300px}.search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:var(--text-muted)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:none;color:var(--text-primary);font-size:.9375rem;width:100%}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.count[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.dept[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3)}.icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:var(--radius-lg);background:linear-gradient(135deg,#fbbf24,#f59e0b);display:flex;align-items:center;justify-content:center}.icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff}.name[_ngcontent-%COMP%]{display:block;font-weight:500}.id[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted)}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-1)}.empty[_ngcontent-%COMP%]{padding:var(--space-16) var(--space-8);text-align:center}.empty[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:var(--text-muted);margin-bottom:var(--space-4)}.empty[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-2)}.empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:var(--space-6)}@media (max-width: 768px){.page[_ngcontent-%COMP%]{padding:var(--space-4)}.search[_ngcontent-%COMP%]{min-width:100%}}"]})};export{A as DepartmentListComponent};
