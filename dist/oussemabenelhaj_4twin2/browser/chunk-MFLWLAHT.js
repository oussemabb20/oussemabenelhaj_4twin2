import{a as k,b as f,c as N,d as T,f as V,h as G,i as q,o as R,q as L}from"./chunk-PI5HVCYI.js";import{b as F,f as I}from"./chunk-E66NZBJX.js";import{$ as S,A as o,F as d,H as m,J as c,L as t,M as n,N as l,Q as M,R as P,S as h,T as r,U as g,l as s,la as O,m as C,na as y,q as b,r as x,s as v,t as u,va as D,xa as E,ya as w}from"./chunk-B4X4Z6EU.js";import{a as _}from"./chunk-4CLCTAJ7.js";function z(a,i){a&1&&l(0,"app-loading-spinner")}function H(a,i){a&1&&(t(0,"small"),r(1,"Required"),n())}function j(a,i){a&1&&(t(0,"small"),r(1,"Required"),n())}function U(a,i){a&1&&(t(0,"small"),r(1,"Required"),n())}function J(a,i){a&1&&(t(0,"small"),r(1,"Required"),n())}function K(a,i){if(a&1){let e=M();t(0,"form",7),P("ngSubmit",function(){b(e);let B=h();return x(B.submit())}),t(1,"section",8)(2,"h3"),v(),t(3,"svg",9),l(4,"path",10),n(),r(5,"Department Details"),n(),u(),t(6,"div",11)(7,"div",12)(8,"label"),r(9,"Name "),t(10,"span"),r(11,"*"),n()(),l(12,"input",13),d(13,H,2,0,"small",5),n(),t(14,"div",12)(15,"label"),r(16,"Location "),t(17,"span"),r(18,"*"),n()(),l(19,"input",14),d(20,j,2,0,"small",5),n(),t(21,"div",12)(22,"label"),r(23,"Phone "),t(24,"span"),r(25,"*"),n()(),l(26,"input",15),d(27,U,2,0,"small",5),n(),t(28,"div",12)(29,"label"),r(30,"Department Head "),t(31,"span"),r(32,"*"),n()(),l(33,"input",16),d(34,J,2,0,"small",5),n()()(),t(35,"footer",17)(36,"a",18),r(37,"Cancel"),n(),t(38,"button",19),r(39),n()()()}if(a&2){let e=h();m("formGroup",e.form),o(12),c("invalid",e.inv("name")),o(),m("ngIf",e.inv("name")),o(6),c("invalid",e.inv("location")),o(),m("ngIf",e.inv("location")),o(6),c("invalid",e.inv("phone")),o(),m("ngIf",e.inv("phone")),o(6),c("invalid",e.inv("head")),o(),m("ngIf",e.inv("head")),o(4),m("disabled",e.form.invalid||e.saving),o(),g(e.saving?"Saving...":e.editMode?"Update":"Create")}}var A=class a{fb=s(R);svc=s(F);route=s(D);router=s(E);form;editMode=!1;loading=!1;saving=!1;id;ngOnInit(){this.form=this.fb.group({name:["",f.required],location:["",f.required],phone:["",f.required],head:["",f.required]});let i=this.route.snapshot.params.id;i&&i!=="new"&&(this.editMode=!0,this.id=+i,this.load(this.id))}load(i){this.loading=!0,this.svc.getById(i).subscribe({next:e=>{this.form.patchValue(e),this.loading=!1},error:()=>this.router.navigate(["/departments"])})}inv(i){let e=this.form.get(i);return!!(e&&e.invalid&&e.touched)}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.saving=!0;let i=_({},this.form.value);this.editMode&&this.id?(i.idDepartment=this.id,this.svc.update(i).subscribe({next:()=>this.router.navigate(["/departments"]),error:()=>this.saving=!1})):this.svc.create(i).subscribe({next:()=>this.router.navigate(["/departments"]),error:()=>this.saving=!1})}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=C({type:a,selectors:[["app-department-form"]],standalone:!0,features:[S],decls:12,vars:4,consts:[[1,"page","animate-fade-in"],["routerLink","/departments",1,"back"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","width","20","height","20"],["d","M19 12H5m7 7-7-7 7-7"],[1,"page-header"],[4,"ngIf"],["class","form-card",3,"formGroup","ngSubmit",4,"ngIf"],[1,"form-card",3,"ngSubmit","formGroup"],[1,"section"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","width","20","height","20"],["d","M3 21h18M5 21V7l7-4 7 4v14"],[1,"grid"],[1,"field"],["formControlName","name","placeholder","Computer Science",1,"form-control"],["formControlName","location","placeholder","Building A, Floor 2",1,"form-control"],["formControlName","phone","placeholder","+1 234 567 890",1,"form-control"],["formControlName","head","placeholder","Dr. John Smith",1,"form-control"],[1,"form-footer"],["routerLink","/departments",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,p){e&1&&(t(0,"div",0)(1,"a",1),v(),t(2,"svg",2),l(3,"path",3),n(),r(4,"Back to Departments"),n(),u(),t(5,"header",4)(6,"h1"),r(7),n(),t(8,"p"),r(9),n()(),d(10,z,1,0,"app-loading-spinner",5)(11,K,40,15,"form",6),n()),e&2&&(o(7),g(p.editMode?"Edit Department":"New Department"),o(2),g(p.editMode?"Update department information":"Add a new department"),o(),m("ngIf",p.loading),o(),m("ngIf",!p.loading))},dependencies:[y,O,L,V,k,N,T,G,q,w,I],styles:[".page[_ngcontent-%COMP%]{padding:var(--space-8);max-width:900px;margin:0 auto}.back[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-2);color:var(--text-secondary);font-size:.875rem;margin-bottom:var(--space-4)}.back[_ngcontent-%COMP%]:hover{color:var(--primary-400)}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--space-6)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--space-1)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}.form-card[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border-subtle);border-radius:var(--radius-xl);overflow:hidden}.section[_ngcontent-%COMP%]{padding:var(--space-6)}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3);font-size:1rem;margin-bottom:var(--space-5)}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--warning-500)}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-5)}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--text-secondary);margin-bottom:var(--space-2)}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--error-500)}.field[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:var(--error-500);font-size:.8125rem;margin-top:var(--space-2)}.form-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-4);padding:var(--space-5) var(--space-6);background:var(--bg-base)}@media (max-width: 768px){.page[_ngcontent-%COMP%]{padding:var(--space-4)}.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-footer[_ngcontent-%COMP%]{flex-direction:column-reverse}.form-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}"]})};export{A as DepartmentFormComponent};
