import './polyfills.server.mjs';
import{a as A,c as j,e as B,p as W}from"./chunk-XIT27GUT.mjs";import{d as H,e as z,f as G}from"./chunk-B24YV5OD.mjs";import{$ as s,N as a,Na as T,Oa as V,Qa as N,T as v,V as d,W as M,X as w,Y as S,Z as e,_ as t,ca as O,da as f,ea as h,fa as r,ga as g,ha as y,ia as P,ja as L,jb as F,ka as k,la as D,m as x,na as I,o as C,oa as _,t as E,u as b,v as c,w as p}from"./chunk-ALOC2SIV.mjs";import"./chunk-5XUXGTUW.mjs";var U=l=>["/enrollments",l],q=l=>["/enrollments",l,"edit"];function J(l,i){l&1&&s(0,"app-loading-spinner")}function K(l,i){if(l&1){let o=O();e(0,"tr")(1,"td")(2,"div",19)(3,"div",20),r(4),t(),e(5,"span"),r(6),t()()(),e(7,"td")(8,"span",21),r(9),t()(),e(10,"td"),r(11),t(),e(12,"td")(13,"span",22),r(14),t()(),e(15,"td")(16,"span",23),r(17),t()(),e(18,"td")(19,"div",24)(20,"a",25),c(),e(21,"svg",3),s(22,"path",26)(23,"circle",27),t()(),p(),e(24,"a",25),c(),e(25,"svg",3),s(26,"path",28)(27,"path",29),t()(),p(),e(28,"button",30),f("click",function(){let m=E(o).$implicit,u=h(2);return b(u.confirmDel(m))}),c(),e(29,"svg",3),s(30,"path",31),t()()()()()}if(l&2){let o,n=i.$implicit,m=h(2);a(3),M("background",m.getColor(n)),a(),g(m.initials(n)),a(2),P("",n.student==null?null:n.student.firstName," ",n.student==null?null:n.student.lastName,""),a(3),g(n.course==null?null:n.course.name),a(2),g(n.enrollmentDate),a(2),w("na",n.grade===null),a(),g((o=n.grade)!==null&&o!==void 0?o:"\u2014"),a(2),S(n.status.toLowerCase()),a(),g(n.status),a(3),d("routerLink",_(15,U,n.idEnrollment)),a(4),d("routerLink",_(17,q,n.idEnrollment))}}function Q(l,i){l&1&&(e(0,"tr")(1,"td",32)(2,"div",33),c(),e(3,"svg",34),s(4,"path",35),t(),p(),e(5,"h3"),r(6,"No enrollments found"),t(),e(7,"p"),r(8,"Add your first enrollment"),t(),e(9,"a",2),r(10,"Add Enrollment"),t()()()())}function X(l,i){if(l&1&&(e(0,"div",16)(1,"table",17)(2,"thead")(3,"tr")(4,"th"),r(5,"Student"),t(),e(6,"th"),r(7,"Course"),t(),e(8,"th"),r(9,"Date"),t(),e(10,"th"),r(11,"Grade"),t(),e(12,"th"),r(13,"Status"),t(),s(14,"th"),t()(),e(15,"tbody"),v(16,K,31,19,"tr",18)(17,Q,11,0,"tr",13),t()()()),l&2){let o=h();a(16),d("ngForOf",o.filtered),a(),d("ngIf",o.filtered.length===0)}}var R=class l{svc=x(H);items=[];filtered=[];loading=!0;showDel=!1;selected=null;search="";colors=["#6366f1","#14b8a6","#f59e0b","#ec4899","#8b5cf6"];ngOnInit(){this.load()}load(){this.svc.getAll().subscribe({next:i=>{this.items=i,this.filtered=i,this.loading=!1},error:()=>this.loading=!1})}filter(){let i=this.search.toLowerCase();this.filtered=this.items.filter(o=>(o.student?.firstName+" "+o.student?.lastName+" "+o.course?.name).toLowerCase().includes(i))}initials(i){return i.student?(i.student.firstName[0]+i.student.lastName[0]).toUpperCase():"??"}getColor(i){return this.colors[(i.idEnrollment||0)%this.colors.length]}confirmDel(i){this.selected=i,this.showDel=!0}del(){this.selected?.idEnrollment&&this.svc.delete(this.selected.idEnrollment).subscribe({next:()=>{this.items=this.items.filter(i=>i.idEnrollment!==this.selected?.idEnrollment),this.filter(),this.showDel=!1},error:()=>this.showDel=!1})}static \u0275fac=function(o){return new(o||l)};static \u0275cmp=C({type:l,selectors:[["app-enrollment-list"]],standalone:!0,features:[I],decls:23,vars:5,consts:[[1,"page","animate-fade-in"],[1,"page-header"],["routerLink","/enrollments/new",1,"btn","btn-primary"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","width","18","height","18"],["d","M12 5v14m-7-7h14"],[1,"card"],[1,"toolbar"],[1,"search"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Search enrollments...",3,"ngModelChange","input","ngModel"],[1,"count"],[4,"ngIf"],["class","table-wrap",4,"ngIf"],["title","Delete Enrollment","message","Delete this enrollment?",3,"confirmed","cancelled","isOpen"],[1,"table-wrap"],[1,"table"],[4,"ngFor","ngForOf"],[1,"student"],[1,"avatar"],[1,"course-tag"],[1,"grade"],[1,"status-badge"],[1,"actions"],[1,"btn","btn-ghost","btn-icon-sm",3,"routerLink"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"btn","btn-ghost","btn-icon-sm",3,"click"],["d","M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],["colspan","6"],[1,"empty"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1"],["d","M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2z"]],template:function(o,n){o&1&&(e(0,"div",0)(1,"header",1)(2,"div")(3,"h1"),r(4,"Enrollments"),t(),e(5,"p"),r(6,"Manage student enrollments"),t()(),e(7,"a",2),c(),e(8,"svg",3),s(9,"path",4),t(),r(10,"Add Enrollment"),t()(),p(),e(11,"div",5)(12,"div",6)(13,"div",7),c(),e(14,"svg",8),s(15,"circle",9)(16,"path",10),t(),p(),e(17,"input",11),D("ngModelChange",function(u){return k(n.search,u)||(n.search=u),u}),f("input",function(){return n.filter()}),t()(),e(18,"span",12),r(19),t()(),v(20,J,1,0,"app-loading-spinner",13)(21,X,18,2,"div",14),t()(),e(22,"app-confirm-dialog",15),f("confirmed",function(){return n.del()})("cancelled",function(){return n.showDel=!1}),t()),o&2&&(a(17),L("ngModel",n.search),a(2),y("",n.filtered.length," enrollments"),a(),d("ngIf",n.loading),a(),d("ngIf",!n.loading),a(),d("isOpen",n.showDel))},dependencies:[N,T,V,F,W,A,j,B,G,z],styles:[".page[_ngcontent-%COMP%]{padding:var(--space-8);max-width:1440px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--space-6);flex-wrap:wrap;gap:var(--space-4)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--space-1)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}.card[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border-subtle);border-radius:var(--radius-xl);overflow:hidden}.toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-4) var(--space-6);border-bottom:1px solid var(--border-subtle);flex-wrap:wrap;gap:var(--space-4)}.search[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3);background:var(--bg-base);border:1px solid var(--border-default);border-radius:var(--radius-lg);padding:var(--space-2) var(--space-4);min-width:300px}.search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:var(--text-muted)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:none;color:var(--text-primary);font-size:.9375rem;width:100%}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.count[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.student[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3)}.avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:var(--radius-full);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.75rem}.course-tag[_ngcontent-%COMP%]{display:inline-block;padding:var(--space-1) var(--space-3);background:#2dd4bf1a;color:var(--accent-400);border-radius:var(--radius-md);font-size:.8125rem;font-weight:500}.grade[_ngcontent-%COMP%]{font-weight:600}.grade.na[_ngcontent-%COMP%]{color:var(--text-muted);font-weight:400}.actions[_ngcontent-%COMP%]{display:flex;gap:var(--space-1)}.empty[_ngcontent-%COMP%]{padding:var(--space-16) var(--space-8);text-align:center}.empty[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:var(--text-muted);margin-bottom:var(--space-4)}.empty[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:var(--space-2)}.empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:var(--space-6)}@media (max-width: 768px){.page[_ngcontent-%COMP%]{padding:var(--space-4)}.search[_ngcontent-%COMP%]{min-width:100%}}"]})};export{R as EnrollmentListComponent};
