import './polyfills.server.mjs';
import{a as L,b as T,c as V,d as F,f as z}from"./chunk-B24YV5OD.mjs";import{$ as s,L as M,N as o,Na as E,Oa as D,Qa as A,T as h,U as O,V as d,W as u,Z as e,_ as t,aa as y,ba as S,e as C,ea as P,fa as i,ga as g,ha as k,jb as I,m as v,na as w,o as _,v as c,w as p}from"./chunk-ALOC2SIV.mjs";import"./chunk-5XUXGTUW.mjs";function G(r,a){r&1&&s(0,"app-loading-spinner")}function N(r,a){if(r&1&&(e(0,"article",40)(1,"div",41),s(2,"div",42),t(),e(3,"div",43)(4,"span",44),i(5),t(),e(6,"span",45),i(7),t()(),e(8,"a",46),c(),e(9,"svg",47),s(10,"path",48),t()()()),r&2){let n=a.$implicit;u("--accent",n.color),o(2),d("innerHTML",n.icon,M),o(3),g(n.value),o(2),g(n.label),o(),d("routerLink",n.link)}}function R(r,a){if(r&1&&(c(),s(0,"circle",49)),r&2){let n=a.$implicit;O("stroke",n.color)("stroke-dasharray",n.dash)("stroke-dashoffset",n.offset)}}function W(r,a){if(r&1&&(e(0,"li"),s(1,"span",50),e(2,"span",51),i(3),t(),e(4,"span",52),i(5),t()()),r&2){let n=a.$implicit;o(),u("background",n.color),o(2),g(n.name),o(2),g(n.count)}}function $(r,a){if(r&1&&(y(0),e(1,"section",7),h(2,N,11,6,"article",8),t(),e(3,"section",9)(4,"article",10)(5,"header",11)(6,"h3"),i(7,"Enrollment Overview"),t(),e(8,"span",12),i(9),t()(),e(10,"div",13)(11,"div",14),c(),e(12,"svg",15),s(13,"circle",16),h(14,R,1,3,"circle",17),t(),p(),e(15,"div",18)(16,"span",19),i(17),t(),e(18,"span",20),i(19,"Total"),t()()(),e(20,"ul",21),h(21,W,6,4,"li",22),t()()(),e(22,"article",23)(23,"header",11)(24,"h3"),i(25,"Quick Actions"),t()(),e(26,"div",24)(27,"a",25)(28,"div",26),c(),e(29,"svg",27),s(30,"path",28)(31,"circle",29)(32,"path",30),t()(),p(),e(33,"span"),i(34,"Add Student"),t()(),e(35,"a",31)(36,"div",32),c(),e(37,"svg",27),s(38,"path",33),t()(),p(),e(39,"span"),i(40,"Add Course"),t()(),e(41,"a",34)(42,"div",35),c(),e(43,"svg",27),s(44,"path",36),t()(),p(),e(45,"span"),i(46,"Add Department"),t()(),e(47,"a",37)(48,"div",38),c(),e(49,"svg",27),s(50,"path",39),t()(),p(),e(51,"span"),i(52,"Add Enrollment"),t()()()()(),S()),r&2){let n=P();o(2),d("ngForOf",n.metrics),o(7),k("",n.stats.enrollments," total"),o(5),d("ngForOf",n.segments),o(3),g(n.stats.enrollments),o(4),d("ngForOf",n.statusData)}}var H=class r{studentService=v(L);departmentService=v(T);courseService=v(V);enrollmentService=v(F);loading=!0;stats={students:0,departments:0,courses:0,enrollments:0};metrics=[];statusData=[];segments=[];ngOnInit(){this.load()}load(){C({students:this.studentService.getAll(),departments:this.departmentService.getAll(),courses:this.courseService.getAll(),enrollments:this.enrollmentService.getAll()}).subscribe({next:a=>{this.stats={students:a.students.length,departments:a.departments.length,courses:a.courses.length,enrollments:a.enrollments.length},this.buildMetrics(),this.buildChart(a.enrollments),this.loading=!1},error:()=>{this.loading=!1}})}buildMetrics(){this.metrics=[{value:this.stats.students,label:"Students",color:"linear-gradient(135deg, #818cf8, #6366f1)",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="7" r="4"/><path d="M3 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"/><circle cx="17" cy="11" r="3"/><path d="M21 21v-1.5a3 3 0 0 0-3-3h-1"/></svg>',link:"/students"},{value:this.stats.departments,label:"Departments",color:"linear-gradient(135deg, #fbbf24, #f59e0b)",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 21h18M5 21V7l7-4 7 4v14M9 21v-6h6v6"/></svg>',link:"/departments"},{value:this.stats.courses,label:"Courses",color:"linear-gradient(135deg, #2dd4bf, #14b8a6)",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"/></svg>',link:"/courses"},{value:this.stats.enrollments,label:"Enrollments",color:"linear-gradient(135deg, #f472b6, #ec4899)",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2z"/></svg>',link:"/enrollments"}]}buildChart(a){let n={ACTIVE:"#4ade80",COMPLETED:"#38bdf8",DROPPED:"#fbbf24",FAILED:"#f87171",WITHDRAWN:"#94a3b8"},m={ACTIVE:0,COMPLETED:0,DROPPED:0,FAILED:0,WITHDRAWN:0};a.forEach(l=>{m[l.status]!==void 0&&m[l.status]++});let B=a.length||1,b=2*Math.PI*52,x=0;this.statusData=Object.entries(m).map(([l,f])=>({name:l.charAt(0)+l.slice(1).toLowerCase(),count:f,color:n[l]})),this.segments=this.statusData.map(l=>{let f=l.count/B*b,j={color:l.color,dash:`${f} ${b}`,offset:-x};return x+=f,j})}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=_({type:r,selectors:[["app-dashboard"]],standalone:!0,features:[w],decls:13,vars:2,consts:[[1,"page","animate-fade-in"],[1,"page-header"],[1,"greeting"],["routerLink","/students/new",1,"btn","btn-primary"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","width","18","height","18"],["d","M12 5v14m-7-7h14"],[4,"ngIf"],[1,"metrics"],["class","metric-card",3,"--accent",4,"ngFor","ngForOf"],[1,"grid-2"],[1,"card","chart-card"],[1,"card-header"],[1,"badge"],[1,"chart-body"],[1,"ring-chart"],["viewBox","0 0 120 120"],["cx","60","cy","60","r","52","fill","none","stroke","var(--slate-800)","stroke-width","12"],["cx","60","cy","60","r","52","fill","none","stroke-width","12","stroke-linecap","round","style","transition: all 0.6s ease",4,"ngFor","ngForOf"],[1,"ring-center"],[1,"ring-value"],[1,"ring-label"],[1,"legend"],[4,"ngFor","ngForOf"],[1,"card","actions-card"],[1,"actions-grid"],["routerLink","/students/new",1,"action-btn"],[1,"action-icon",2,"--bg","linear-gradient(135deg, #818cf8, #6366f1)"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["d","M12 14v3m-1.5-1.5h3"],["routerLink","/courses/new",1,"action-btn"],[1,"action-icon",2,"--bg","linear-gradient(135deg, #2dd4bf, #14b8a6)"],["d","M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"],["routerLink","/departments/new",1,"action-btn"],[1,"action-icon",2,"--bg","linear-gradient(135deg, #fbbf24, #f59e0b)"],["d","M3 21h18M5 21V7l7-4 7 4v14M9 21v-6h6v6"],["routerLink","/enrollments/new",1,"action-btn"],[1,"action-icon",2,"--bg","linear-gradient(135deg, #f472b6, #ec4899)"],["d","M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2z"],[1,"metric-card"],[1,"metric-icon"],[3,"innerHTML"],[1,"metric-body"],[1,"metric-value"],[1,"metric-label"],[1,"metric-link",3,"routerLink"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M5 12h14m-7-7 7 7-7 7"],["cx","60","cy","60","r","52","fill","none","stroke-width","12","stroke-linecap","round",2,"transition","all 0.6s ease"],[1,"legend-dot"],[1,"legend-name"],[1,"legend-count"]],template:function(n,m){n&1&&(e(0,"div",0)(1,"header",1)(2,"div")(3,"p",2),i(4,"Welcome back \u{1F44B}"),t(),e(5,"h1"),i(6,"Dashboard"),t()(),e(7,"a",3),c(),e(8,"svg",4),s(9,"path",5),t(),i(10," New Student "),t()(),h(11,G,1,0,"app-loading-spinner",6)(12,$,53,5,"ng-container",6),t()),n&2&&(o(11),d("ngIf",m.loading),o(),d("ngIf",!m.loading))},dependencies:[A,E,D,I,z],styles:['.page[_ngcontent-%COMP%]{padding:var(--space-8);max-width:1440px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:var(--space-8);flex-wrap:wrap;gap:var(--space-4)}.greeting[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9375rem;margin-bottom:var(--space-1)}.metrics[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:var(--space-6);margin-bottom:var(--space-8)}.metric-card[_ngcontent-%COMP%]{position:relative;background:var(--bg-surface);border:1px solid var(--border-subtle);border-radius:var(--radius-xl);padding:var(--space-6);display:flex;align-items:center;gap:var(--space-4);transition:all var(--transition-base);overflow:hidden}.metric-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:3px;background:var(--accent)}.metric-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 24px -8px #0000004d;border-color:var(--slate-600)}.metric-icon[_ngcontent-%COMP%]{width:52px;height:52px;background:var(--accent);border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center;flex-shrink:0}.metric-icon[_ngcontent-%COMP%]     svg{width:26px;height:26px;color:#fff}.metric-body[_ngcontent-%COMP%]{flex:1}.metric-value[_ngcontent-%COMP%]{display:block;font-size:1.75rem;font-weight:700;line-height:1.2}.metric-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary)}.metric-link[_ngcontent-%COMP%]{position:absolute;top:var(--space-4);right:var(--space-4);width:32px;height:32px;display:flex;align-items:center;justify-content:center;color:var(--text-muted);border-radius:var(--radius-md);transition:all var(--transition-fast)}.metric-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.metric-link[_ngcontent-%COMP%]:hover{background:var(--bg-elevated);color:var(--primary-400)}.grid-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--space-6)}.card[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border-subtle);border-radius:var(--radius-xl)}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:var(--space-5) var(--space-6);border-bottom:1px solid var(--border-subtle)}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}.badge[_ngcontent-%COMP%]{background:var(--bg-elevated);padding:var(--space-1) var(--space-3);border-radius:var(--radius-full);font-size:.75rem;font-weight:600;color:var(--text-secondary)}.chart-body[_ngcontent-%COMP%]{padding:var(--space-6);display:flex;align-items:center;gap:var(--space-8)}.ring-chart[_ngcontent-%COMP%]{position:relative;width:140px;height:140px;flex-shrink:0}.ring-chart[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;transform:rotate(-90deg)}.ring-center[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.ring-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.ring-label[_ngcontent-%COMP%]{font-size:.6875rem;color:var(--text-muted);text-transform:uppercase;letter-spacing:.05em}.legend[_ngcontent-%COMP%]{list-style:none;flex:1;display:flex;flex-direction:column;gap:var(--space-3)}.legend[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3)}.legend-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%}.legend-name[_ngcontent-%COMP%]{flex:1;font-size:.875rem;color:var(--text-secondary)}.legend-count[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-4);padding:var(--space-6)}.action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:var(--space-3);padding:var(--space-6) var(--space-4);background:var(--bg-base);border:1px solid var(--border-subtle);border-radius:var(--radius-lg);transition:all var(--transition-base);text-align:center}.action-btn[_ngcontent-%COMP%]:hover{border-color:var(--primary-500);transform:translateY(-2px);box-shadow:0 8px 16px -4px #0003}.action-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-primary)}.action-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:var(--bg);border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center}.action-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#fff}@media (max-width: 1200px){.metrics[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.page[_ngcontent-%COMP%]{padding:var(--space-4)}.metrics[_ngcontent-%COMP%], .grid-2[_ngcontent-%COMP%]{grid-template-columns:1fr}.chart-body[_ngcontent-%COMP%]{flex-direction:column}.actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})};export{H as DashboardComponent};
