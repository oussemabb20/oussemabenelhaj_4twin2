import './polyfills.server.mjs';
import{a as N,b as d,c as T,d as V,f as A,g as G,h as q,i as D,n as R,o as L,q as B}from"./chunk-XIT27GUT.mjs";import{c as I,f as k}from"./chunk-B24YV5OD.mjs";import{$ as s,N as a,Oa as O,Qa as y,T as l,V as m,X as u,Z as t,_ as n,ca as M,da as P,ea as C,fa as o,fb as E,ga as f,ib as w,jb as F,m as p,na as S,o as h,t as b,u as x,v as g,w as v}from"./chunk-ALOC2SIV.mjs";import{a as _}from"./chunk-5XUXGTUW.mjs";function j(r,i){r&1&&s(0,"app-loading-spinner")}function U(r,i){r&1&&(t(0,"small"),o(1,"Required"),n())}function J(r,i){r&1&&(t(0,"small"),o(1,"Required"),n())}function K(r,i){r&1&&(t(0,"small"),o(1,"Min 1 credit"),n())}function Q(r,i){r&1&&(t(0,"small"),o(1,"Required"),n())}function W(r,i){if(r&1){let e=M();t(0,"form",7),P("ngSubmit",function(){b(e);let H=C();return x(H.submit())}),t(1,"section",8)(2,"h3"),g(),t(3,"svg",9),s(4,"path",10),n(),o(5,"Course Details"),n(),v(),t(6,"div",11)(7,"div",12)(8,"label"),o(9,"Name "),t(10,"span"),o(11,"*"),n()(),s(12,"input",13),l(13,U,2,0,"small",5),n(),t(14,"div",12)(15,"label"),o(16,"Code "),t(17,"span"),o(18,"*"),n()(),s(19,"input",14),l(20,J,2,0,"small",5),n(),t(21,"div",12)(22,"label"),o(23,"Credits "),t(24,"span"),o(25,"*"),n()(),s(26,"input",15),l(27,K,2,0,"small",5),n(),t(28,"div",16)(29,"label"),o(30,"Description "),t(31,"span"),o(32,"*"),n()(),s(33,"textarea",17),l(34,Q,2,0,"small",5),n()()(),t(35,"footer",18)(36,"a",19),o(37,"Cancel"),n(),t(38,"button",20),o(39),n()()()}if(r&2){let e=C();m("formGroup",e.form),a(12),u("invalid",e.inv("name")),a(),m("ngIf",e.inv("name")),a(6),u("invalid",e.inv("code")),a(),m("ngIf",e.inv("code")),a(6),u("invalid",e.inv("credit")),a(),m("ngIf",e.inv("credit")),a(6),u("invalid",e.inv("description")),a(),m("ngIf",e.inv("description")),a(4),m("disabled",e.form.invalid||e.saving),a(),f(e.saving?"Saving...":e.editMode?"Update":"Create")}}var z=class r{fb=p(L);svc=p(I);route=p(E);router=p(w);form;editMode=!1;loading=!1;saving=!1;id;ngOnInit(){this.form=this.fb.group({name:["",d.required],code:["",d.required],credit:[3,[d.required,d.min(1)]],description:["",d.required]});let i=this.route.snapshot.params.id;i&&i!=="new"&&(this.editMode=!0,this.id=+i,this.load(this.id))}load(i){this.loading=!0,this.svc.getById(i).subscribe({next:e=>{this.form.patchValue(e),this.loading=!1},error:()=>this.router.navigate(["/courses"])})}inv(i){let e=this.form.get(i);return!!(e&&e.invalid&&e.touched)}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.saving=!0;let i=_({},this.form.value);this.editMode&&this.id?(i.idCourse=this.id,this.svc.update(i).subscribe({next:()=>this.router.navigate(["/courses"]),error:()=>this.saving=!1})):this.svc.create(i).subscribe({next:()=>this.router.navigate(["/courses"]),error:()=>this.saving=!1})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=h({type:r,selectors:[["app-course-form"]],standalone:!0,features:[S],decls:12,vars:4,consts:[[1,"page","animate-fade-in"],["routerLink","/courses",1,"back"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","width","20","height","20"],["d","M19 12H5m7 7-7-7 7-7"],[1,"page-header"],[4,"ngIf"],["class","form-card",3,"formGroup","ngSubmit",4,"ngIf"],[1,"form-card",3,"ngSubmit","formGroup"],[1,"section"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","width","20","height","20"],["d","M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"],[1,"grid"],[1,"field"],["formControlName","name","placeholder","Introduction to Programming",1,"form-control"],["formControlName","code","placeholder","CS101",1,"form-control"],["type","number","formControlName","credit","min","1",1,"form-control"],[1,"field","full"],["formControlName","description","rows","4","placeholder","Course description",1,"form-control"],[1,"form-footer"],["routerLink","/courses",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(e,c){e&1&&(t(0,"div",0)(1,"a",1),g(),t(2,"svg",2),s(3,"path",3),n(),o(4,"Back to Courses"),n(),v(),t(5,"header",4)(6,"h1"),o(7),n(),t(8,"p"),o(9),n()(),l(10,j,1,0,"app-loading-spinner",5)(11,W,40,15,"form",6),n()),e&2&&(a(7),f(c.editMode?"Edit Course":"New Course"),a(2),f(c.editMode?"Update course information":"Add a new course"),a(),m("ngIf",c.loading),a(),m("ngIf",!c.loading))},dependencies:[y,O,B,A,N,G,T,V,R,q,D,F,k],styles:[".page[_ngcontent-%COMP%]{padding:var(--space-8);max-width:900px;margin:0 auto}.back[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:var(--space-2);color:var(--text-secondary);font-size:.875rem;margin-bottom:var(--space-4)}.back[_ngcontent-%COMP%]:hover{color:var(--primary-400)}.page-header[_ngcontent-%COMP%]{margin-bottom:var(--space-6)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:var(--space-1)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}.form-card[_ngcontent-%COMP%]{background:var(--bg-surface);border:1px solid var(--border-subtle);border-radius:var(--radius-xl);overflow:hidden}.section[_ngcontent-%COMP%]{padding:var(--space-6)}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--space-3);font-size:1rem;margin-bottom:var(--space-5)}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--accent-500)}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--space-5)}.field.full[_ngcontent-%COMP%]{grid-column:1/-1}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:var(--text-secondary);margin-bottom:var(--space-2)}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--error-500)}.field[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:var(--error-500);font-size:.8125rem;margin-top:var(--space-2)}.form-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:var(--space-4);padding:var(--space-5) var(--space-6);background:var(--bg-base)}@media (max-width: 768px){.page[_ngcontent-%COMP%]{padding:var(--space-4)}.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-footer[_ngcontent-%COMP%]{flex-direction:column-reverse}.form-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}"]})};export{z as CourseFormComponent};
